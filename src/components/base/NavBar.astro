---
import Link from '~/components/base/Link.astro'
import LogoButton from '~/components/widgets/LogoButton.astro'
import ToTopButton from '~/components/widgets/ToTopButton.astro'
import ThemeSwitch from '~/components/widgets/ThemeSwitch.astro'
import SearchSwitch from '~/components/widgets/SearchSwitch.astro'

import { SITE, SOCIALS } from '~/config'
import { ensureTrailingSlash, getUrl } from '~/utils/common-utils'
---

<header>
  <LogoButton />
  <nav
    class="nav flex items-center justify-end w-full p-8 lt-md:px-6"
    aria-label="Main menu"
  >
    <div class="right grid grid-auto-flow-col gap-[1.2rem] print:op-0">
      {
        SITE.navBar.map((item) => (
          <Link
            class="op-transition"
            href={getUrl(ensureTrailingSlash(item.path))}
            title={item.prompt}
            aria-current={
              Astro.url.pathname === getUrl(ensureTrailingSlash(item.path))
                ? 'page'
                : false
            }
          >
            {item.type === 'rwd' && (
              <>
                <span class="lt-md:hidden">{item.text}</span>
                <div class={`md:hidden ${item.icon}`} />
              </>
            )}
            {item.type === 'icon' && <div class={item.icon} />}
            {item.type === 'text' && <span>{item.text}</span>}
          </Link>
        ))
      }
      {
        SOCIALS.map((item) => {
          return (
            <Link
              class={`${item.rwd ? 'lt-md:hidden' : ''} op-transition`}
              href={item.href}
              title={item.title}
              external={true}
            >
              <div class={`${item.icon}`} />
            </Link>
          )
        })
      }
      <SearchSwitch />
      <ThemeSwitch />
      <Link
        class="lt-md:hidden op-transition"
        href={getUrl('/rss.xml')}
        title="RSS Feed"
        external={true}
      >
        <div class="i-lucide-rss"></div>
      </Link>
    </div>
  </nav>
  <ToTopButton />
</header>
